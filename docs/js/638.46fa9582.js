"use strict";(globalThis["webpackChunksession_desktop"]=globalThis["webpackChunksession_desktop"]||[]).push([[638],{4638:(s,e,a)=>{a.r(e),a.d(e,{default:()=>f});var o=a(9835),t=a(6970);const n=s=>((0,o.dD)("data-v-2e257439"),s=s(),(0,o.Cn)(),s),d={class:"reset-password"},r=n((()=>(0,o._)("img",{src:"logo.png",alt:"Session-logo",class:"logo"},null,-1))),l={class:"title"},i={key:0,class:"box"},w={class:"explanation"},p={key:1,class:"box"},c={class:"explanation"};function h(s,e,a,n,h,u){const g=(0,o.up)("q-icon"),_=(0,o.up)("q-input"),m=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",d,[r,(0,o._)("div",l,(0,t.zw)(s.$t("auth.reset_password")),1),s.passwordChanged?(0,o.kq)("v-if",!0):((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",w,(0,t.zw)(s.$t("auth.reset_password_explanation")),1),(0,o.Wm)(_,{type:s.clearPswd?"text":"password",label:s.$t("auth.new_password"),class:"new-password-input",modelValue:s.newPassword,"onUpdate:modelValue":e[1]||(e[1]=e=>s.newPassword=e)},{append:(0,o.w5)((()=>[(0,o.Wm)(g,{name:s.clearPswd?"visibility":"visibility_off",class:"cursor-pointer",onClick:e[0]||(e[0]=e=>s.clearPswd=!s.clearPswd)},null,8,["name"])])),_:1},8,["type","label","modelValue"]),(0,o.Wm)(m,{color:"primary",label:s.$t("others.send"),"no-caps":!0,onClick:s.sendNewPassword,loading:s.loading},null,8,["label","onClick","loading"])])),s.passwordChanged?((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("div",c,(0,t.zw)(s.$t("auth.password_changed")),1)])):(0,o.kq)("v-if",!0)])}var u=a(3746),g=a(1569);const _=(0,u.Q_)("auth",{state:()=>({}),getters:{},actions:{resetPassword(s){return new Promise(((e,a)=>g.api.post("/reset_password",s).then((({data:s})=>{console.log(s),e(s)})).catch((s=>{a(s.response)}))))}}}),m=(0,o.aZ)({name:"ResetPassword",data(){return{newPassword:"",passwordChanged:!1,loading:!1,clearPswd:!1}},methods:{sendNewPassword(){this.loading=!0,_().resetPassword({token:this.$route.query.token,password:this.newPassword}).then((()=>{this.passwordChanged=!0,this.loading=!1})).catch((()=>{this.loading=!1,this.$q.notify({message:this.$t("others.error_happened"),color:"red",timeout:1e3})}))}}});var k=a(1639),v=a(2916),P=a(2857),b=a(7065),C=a(9984),y=a.n(C);const $=(0,k.Z)(m,[["render",h],["__scopeId","data-v-2e257439"]]),f=$;y()(m,"components",{QInput:v.Z,QIcon:P.Z,QBtn:b.Z})}}]);